webpackJsonp([2,0],[function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var a=s(68),n=i(a),o=s(61),l=i(o),c=s(66),r=i(c),u=s(67),d=i(u),p=s(52),h=i(p),f=s(13),v=i(f);v["default"].init(),h["default"].attach(document.body),n["default"].use(r["default"]),n["default"].use(d["default"]),new n["default"]({el:"#app",components:{app:l["default"]}})},,,,,,function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(22),n=i(a),o=s(20),l=i(o),c=(0,n["default"])({defaultMusic:{id:27534134,title:"老司机带带我",url:"http://m2.music.126.net/TKiRf1KDSzS2NwTg9a3yIw==/5674579511013571.mp3",picUrl:"http://p3.music.126.net/Z4AP7bE0UuhuBEfXI7G0ag==/3398590442421537.jpg",artists:"群星"},lsName:"__list__",lsCurr:"__curr__",lsMode:"__mode__",assign:function(t,e){if("function"!=typeof l["default"]){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(void 0!==a&&null!==a)for(var n in a)a.hasOwnProperty(n)&&(s[n]=a[n])}return s}return(0,l["default"])(t,e)},shuffle:function(t){t=t||[];for(var e=t.length,s=0;s<e-1;s++){var i=Math.floor(Math.random()*(e-s)),a=t[i];t[i]=t[e-s-1],t[e-s-1]=a}return t.shift()||[this.defaultMusic]},fillData:function(t){var e,s,i=localStorage.getItem(this.lsName);return i=JSON.parse(i)||[],t=i.length?t||{}:this.defaultMusic,s=this.assign([],i),i.forEach(function(s,i){t.id&&s.id==t.id&&(e=!0)}),!e&&t.id&&s.unshift(t),s},url:"http://192.168.10.240/"},"url","http://page.laoono.com");e["default"]=c},,,,,,,function(t,e){"use strict";function s(){var t=navigator.userAgent.toLowerCase(),e=/ipad/i.test(t),s=/iphone os/i.test(t),i=/midp/i.test(t),a=/rv:1.2.3.4/i.test(t),n=/ucweb/i.test(t),o=/android/i.test(t),l=/windows ce/i.test(t),c=/windows mobile/i.test(t);return e||s||i||a||n||o||l||c}function i(){var t,e,i,a=document.documentElement,n=document.createElement("style"),o=document.querySelector('meta[name="viewport"]');t=(s()?window.devicePixelRatio:1)||1,e=(s()?a.clientWidth:320)*t/10,i=1/t,o.setAttribute("content","width="+t*a.clientWidth+",initial-scale="+i+",maximum-scale="+i+", minimum-scale="+i+",user-scalable=no"),a.setAttribute("data-dpr",t),a.firstElementChild.appendChild(n),n.innerHTML="html{font-size:"+e+"px!important;}",window.rem2px=function(t){return t=parseFloat(t),t*e},window.px2rem=function(t){return t=parseFloat(t),t/e},window.dpr=t,window.rem=e,document.body.addEventListener("touchmove",function(t){t.preventDefault()},!1)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={init:i,isMobile:s}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(19),n=i(a),o=s(6),l=i(o),c=s(63),r=i(c),u=s(65),d=i(u),p=s(62),h=i(p),f=s(64),v=i(f);e["default"]={data:function(){return{audio:document.createElement("audio"),storage:window.localStorage,picUrl:"",playingTitle:"",playingArtist:"",playingLists:[],songLists:[],sValue:"",showCurrentTime:"00:00",showDurationTime:"00:00",isPlay:!1,listOpen:!1,searchOpen:!1,menuOpen:!1,touchEnabled:!0,loading:!1,isAnimationComplete:!1,isSwipe:!1,nextIndex:0,currId:0,nextId:0,isSearching:!1,mode:["loop","repeat","rand"],currMode:0,scroll:{}}},ready:function(){setInterval(this.setProgress,250),this.init(),this.currMode=this.storage.getItem(l["default"].lsMode)||this.currMode},events:{playMusic:function(t){this.playMusic(t)},swipeDel:function(t){this.swipeDel(t)},toggleList:function(){this.toggleList()},toggleMenu:function(){this.toggleMenu()},toggleSearch:function(){this.toggleSearch()}},methods:{setPlay:function(){return 0==this.audio.readyState?void(this.isPlay=!1):void(this.audio.paused?(this.audio.play(),this.isPlay=!0):(this.audio.pause(),this.isPlay=!1))},playMusic:function(t){this.searchOpen=!1,this.listOpen=!1,this.touchEnabled=!0,this.isPlay=!1,this.$http.get(l["default"].url+"/api/music/",{params:{controller:"detail",id:t}}).then(function(t){var e,s=JSON.parse(t.data).songs[0]||{},i=s.id,a=s.name,o=s.mp3Url,c=s.album&&s.album.picUrl||"";e=s.artists&&s.artists[0].name||"",this.playingTitle=a,this.playingArtist=e,this.picUrl=c;var r=this,u=r.audio;u.src=o,u.addEventListener("canplay",function(){u.play()},!1);var d={id:i,title:a,url:o,picUrl:c,artists:e},p=this.storage,h=l["default"].fillData(d);this.playingLists=h,this.currId=i,p.setItem(l["default"].lsName,(0,n["default"])(h))},function(t){})},init:function(){for(var t=l["default"].fillData(),e=this.storage,s=t.length,i=e.getItem(l["default"].lsCurr)||l["default"].defaultMusic.id,a=0,o=0;o<s;o++)t[o].id==i&&(a=o);this.playingTitle=t[a].title,this.playingArtist=t[a].artists,this.picUrl=t[a].picUrl,this.audio.src=t[a].url,this.playingLists=t,e.setItem(l["default"].lsName,(0,n["default"])(t));var c=this;this.audio.addEventListener("ended",function(){var t=c.storage.getItem(l["default"].lsCurr),e=c.storage.getItem(l["default"].lsMode)||c.currMode;1==e?c.setPlay():2==e?(c.nextId=l["default"].shuffle(c.playingLists).id,c.playMusic(c.nextId)):(c.nextId=c.getNext(t,1).id,c.playMusic(c.nextId)),c.isPlay=!1}),this.audio.addEventListener("pause",function(){c.isPlay=!1}),this.audio.addEventListener("play",function(){c.isPlay=!0,c.audio.autoplay=!0})},setProgress:function(){var t,e,s,i,a=this.audio,n=a.currentTime,o=a.duration,l=o-n||0;t=parseInt(l/60),e=parseInt(l%60),this.showCurrentTime=s=(t<10?"0"+t:t)+":"+(e<10?"0"+e:e),t=parseInt(o/60),e=parseInt(o%60),this.showDurationTime=i=t+":"+(e<10?"0"+e:e)},swipeDel:function(t){console.log(t);var e,s=this.storage,i=l["default"].lsName,a=JSON.parse(s.getItem(i)),o=a.slice(0,t).concat(a.slice(parseInt(t,10)+1));s.setItem(i,(0,n["default"])(o)),e=JSON.parse(this.storage.getItem(i)),this.playingLists=e},getNext:function(t,e){var s,i=this.storage.getItem(l["default"].lsName),a=0;return i=JSON.parse(i)||[],i.forEach(function(e,s){e.id==t&&(a=s)}),a=e>0?++a:--a,a=a==i.length?0:a<0?i.length-1:a,s=i[a].id,{id:s,index:a}},nextPlay:function(t){var e=this.storage.getItem(l["default"].lsCurr),s=this.getNext(e,t);this.nextIndex=s.index,this.nextId=s.id,this.playMusic(s.id)},modeHandler:function(){this.currMode=this.storage.getItem(l["default"].lsMode)||this.currMode,this.currMode++,this.currMode>=3&&(this.currMode=0);var t,e=this.mode,s=this.currMode;e.length;switch(t=e[s],this.audio.loop=!1,t){case"repeat":this.audio.loop=!0;break;case"rand":}},toggleList:function(){this.listOpen=!this.listOpen,this.touchEnabled=!this.listOpen},toggleMenu:function(){this.touchEnabled&&(this.menuOpen=!this.menuOpen)},toggleSearch:function(){this.touchEnabled&&(this.searchOpen=!this.searchOpen),!this.searchOpen&&(this.sValue="",this.songLists=[])}},computed:{currModeName:function(){return"ico-"+this.mode[this.currMode]}},components:{vHeader:r["default"],vSearch:d["default"],vActionsheet:h["default"],vMenu:v["default"]},watch:{currId:function(t){this.storage.setItem(l["default"].lsCurr,t)},currMode:function(t){this.storage.setItem(l["default"].lsMode,t)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:["listOpen","playingLists"],methods:{playMusic:function(t){this.$dispatch("playMusic",t)},swipeDel:function(t){this.$dispatch("swipeDel",t)},toggleList:function(){this.$dispatch("toggleList")}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:["menuOpen"],methods:{toggleSearch:function(){this.$dispatch("toggleSearch")},toggleMenu:function(){this.$dispatch("toggleMenu")}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:["menuOpen"]}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(54),n=i(a),o=s(6),l=i(o),c=n["default"].iScroll;e["default"]={data:function(){return{songLists:[],offset:40,pages:0,currPage:1,scroll:null,isSearching:!1,sValue:""}},ready:function(){this.init()},watch:{songLists:function(){this.scroll.refresh()}},props:["searchOpen"],methods:{toggleSearch:function(){this.searchOpen=!this.searchOpen,!this.searchOpen&&(this.sValue="",this.songLists=[])},formSubmit:function(){this.isSearching=!0,this.currPage=1,this.$http.get(l["default"].url+"/api/music/",{params:{controller:"search",s:this.sValue},before:function(){this.songLists=[]}}).then(function(t){t=t||{};var e=JSON.parse(t.data)||{};e=e.result.songs||[],this.songLists=e,this.isSearching=!1},function(t){console.log(t,"error"),this.isSearching=!1})},init:function(){var t=this,e=document.getElementById("js-serachlist-scroll"),s=e.offsetHeight;t.scroll=new c(e,{vScrollbar:!1,onRefresh:function(){},onScrollEnd:function(){var e=t.scroll;if(Math.abs(e.y)+s+10>=e.scrollerH){var i=t.currPage++;t.pages=i*t.offset,t.isSearching!==!0&&t.searchOpen&&(t.isSearching=!0,t.$http.get(l["default"].url+"/api/music/",{params:{controller:"search",s:t.sValue,p:t.pages}}).then(function(e){e=e||{};var s=JSON.parse(e.data)||{};s=s.result&&s.result.songs||[],t.songLists=t.songLists.concat(s),t.isSearching=!1},function(e){t.isSearching=!1}))}}})},playMusic:function(t){this.$dispatch("playMusic",t)},clearSValue:function(){this.sValue=""}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},,,,function(t,e,s){t.exports=s.p+"static/img/qrcode.f2d6e98.png"},function(t,e){t.exports=' <div class=actionsheet> <div class=mod-list-box> <h6 class=list-box-tit>播放队列<span class="list-box-count js-playlist-num">({{ playingLists.length }}首)</span></h6> <div class=list-box-cont id=js-playlist-scroll style="overflow: scroll"> <ul class="mod-play-list js-playlist-box"> <li class=play-list-item-current v-for="list in playingLists"> <div class=play-list-scroll v-touch:tap=playMusic(list.id)> <span class=play-list-song>{{ list.title }}</span> <b class=play-list-line>-</b> <span class=play-list-singer>{{ list.artists }}</span> </div> <button class=list-item-del v-touch:tap=swipeDel($index)><i class="ico ico-del"></i> </button> </li> </ul> </div> <a class="list-box-close js-close-playlist" v-touch:tap=toggleList href=javascript:;>关闭</a> </div> </div> '},function(t,e){t.exports=' <div class=header> <header> <button class=header-btn-left v-touch:tap=toggleMenu><i class="ico ico-menu" v-bind:class="{\'ico-close\': menuOpen}"></i></button> <button class=header-btn-right v-touch:tap=toggleSearch><i class="ico ico-search"></i></button> </header> </div> '},function(t,e,s){t.exports=" <section class=menu-page-wrap v-bind:class=\"{'menu-page-wrap-show': menuOpen}\"> <div class=menu-page-mask></div> <div class=menu-page> <h3 class=menu-title>二维码</h3> <div class=menu-qr-code> <img src="+s(55)+' alt=""> </div> </div> </section> '},function(t,e){t.exports=' <section class=search-page-wrap v-bind:class="{\'search-page-wrap-show\': searchOpen}"> <div class=search-page> <div class=header> <form @submit.prevent action onsubmit="return false;"> <header> <div class=header-search> <button class=header-search-btn type=button v-touch:tap=formSubmit> <i class="ico ico-search"></i> </button> <input type=search required class=header-search-field v-model=sValue value="{{ sValue }}" autocomplete=off placeholder=搜索音乐 @keyup.enter=formSubmit> <button class=header-search-clear type=button v-touch:tap=clearSValue> <i class="ico ico-close"></i> </button> </div> <button class=header-btn-right type=button v-touch:tap=toggleSearch>取消</button> </header> </form> </div> <div id=js-serachlist-scroll class=search-page-scroll> <ul class=search-items> <li v-for="list in songLists" v-touch:tap="playMusic(list.id, $event)"> <i class="ico ico-music"></i> <span class=play-list-song>{{ list.name }}</span> <span class=play-list-singer>{{ list.artists[0].name }}</span> </li> <section class=ani-playing-box v-bind:style="{visibility: isSearching ? \'visible\' : \'hidden\'}"> <div class=ani-playing> <span class=ani-playing-animation><b><i></i><i></i><i></i><i></i></b></span> <span class=ani-playing-txt>正在加载</span> </div> </section> </ul> </div> </div> </section> '},function(t,e){t.exports=' <div class=vue-app v-bind:class="{\'view-menu\': menuOpen}" _v-647d59cc=""> <div class=view v-bind:class="{\'actionsheet-up\': listOpen}" _v-647d59cc=""> <v-header :menu-open=menuOpen _v-647d59cc=""></v-header> <div class=cover-box v-bind:style="{backgroundImage: \'url(\' + picUrl + \')\'}" _v-647d59cc=""> </div> <section class=main-wrap _v-647d59cc=""> <div class=m-content-wrap _v-647d59cc=""> <div class="m-circle-box VAM" _v-647d59cc=""> <div class=m-circle-box-in v-bind:class="[ isPlay ? \'animation-running animation-rotate\' : \'animation-pause animation-rotate\']" _v-647d59cc=""> <img v-bind:src=picUrl _v-647d59cc=""> </div> </div> <time class=time _v-647d59cc="">{{ showCurrentTime }}</time> <h3 class=m-name _v-647d59cc="">{{playingTitle}} - {{playingArtist}}</h3> </div> </section> <div class=m-control-box _v-647d59cc=""> <div class=m-control _v-647d59cc=""> <button class=m-control-btn v-touch:tap=modeHandler _v-647d59cc=""> <i class=ico :class=currModeName _v-647d59cc=""></i> </button> <button class=m-control-btn v-touch:tap=nextPlay(-1) _v-647d59cc=""> <i class="ico ico-pre" _v-647d59cc=""></i> </button> <button class=m-control-btn v-touch:tap=setPlay _v-647d59cc=""> <i class="ico ico-play" :class="[isPlay? \'ico-pause\': \'ico-play\']" _v-647d59cc=""></i> </button> <button class=m-control-btn v-touch:tap=nextPlay(1) _v-647d59cc=""> <i class="ico ico-next" _v-647d59cc=""></i> </button> <button class=m-control-btn v-touch:tap=toggleList _v-647d59cc=""> <i class="ico ico-m-list" _v-647d59cc=""></i> </button> </div> </div> <v-actionsheet :list-open.sync=listOpen :playing-lists.sync=playingLists _v-647d59cc=""></v-actionsheet> </div> <v-search :search-open.sync=searchOpen _v-647d59cc=""></v-search> <v-menu :menu-open.sync=menuOpen _v-647d59cc=""></v-menu> </div> '},function(t,e,s){var i,a;s(51),i=s(14),a=s(60),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;i=s(15),a=s(56),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;i=s(16),a=s(57),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;i=s(17),a=s(58),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,s){var i,a;i=s(18),a=s(59),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)}]);